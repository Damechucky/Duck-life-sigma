<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mother's Day Game</title>

    <link rel="stylesheet" href="/levelQ/style.css" />
  </head>
  <body>
    <h1>click the box for points, get 30 for the win</h1>

    <div id="score">Score: 0</div>
    <div id="timer">time left 30s</div>

    <div id="menu">
      <h2>happy mothersday mom!</h2>
      <button id="startButton">Start Game</button>
    </div>

    <div id="endScreen" style="display: none">
      <h2>game over!</h2>
      <p id="finalScore">your score: 0</p>
      <button id="restartButton">restart</button>
    </div>

    <div id="winScreen" style="display: none">
      <h2 id="LevelQh2">you win</h2>
      <p id="levelQp">You got all 30 points</p>
      <button id="nextLevelButton">Level W</button>
    </div>

    <canvas id="canvas" width="600" height="400"></canvas>
    <script>
      const nextLevelButton = document.getElementById("nextLevelButton")
      const winText = document.getElementById("LevelQh2")
      const winSub = document.getElementById("levelQp")
            const menu = document.getElementById("menu");
            const startButton = document.getElementById("startButton");
            const canvas = document.getElementById("canvas");
            const ctx = canvas.getContext("2d");
            const timerDisplay = document.getElementById("timer");
            const scoreDisplay = document.getElementById("score");
            const endScreen = document.getElementById("endScreen");
            const finalScore = document.getElementById("finalScore");
            const restartButton = document.getElementById("restartButton");

            let score = 0;
            let timeleft = 30;
            let timerInterval;
            let currentLevel = "Q"

            let block = {
              x: 50,
              y: 50,
              width: 50,
              height: 50,
              dy: 2,
              dx: 2,
              color: "#000000",
            };
function startLevel(level) {
canvas.style.display = "block";
document.getElementById("winScreen").style.display = "none";
endScreen.style.display = "none"  ;
  score = 0;
  timeleft = 30;
  scoreDisplay.textContent = "score: 0";
  timerDisplay.textContent = "timeleft: 30s"


  if (level === "W") {
    block.dx = 2;
    block.dy = 2;
    block.width = 50;
    block.height = 50;
  } else if (level === "E") {
    block.dx = 2;
    block.dy = 2;
    block.width = 50;
    block.height = 50;
  } else {
    block.dx = 2;
    block.dy = 2;
    block.width = 50;
    block.height = 50;
  }

  draw();
}

            startButton.addEventListener("click", () => {
              menu.style.display = "none";
              
              startLevel(currentLevel);
              
              startTimer();
            });

            restartButton.addEventListener("click", () => {
              location.reload();
            });

      nextLevelButton.addEventListener("click", () => {
      if (currentLevel === "Q") {
      currentLevel = "W";
        nextLevelButton.textContent = "next level E"
      } else if (currentLevel === "W") {
        currentLevel = "E";
        nextLevelButton.style.display = "none";
      }
        startLevel(currentLevel);
        startTimer();
      });
            function startTimer() {
              clearInterval(timerInterval);
              timerInterval = setInterval(() => {
                timeleft--;
                timerDisplay.textContent = "timeleft:" + timeleft + "s";
                if (timeleft <= 0) {
                  clearInterval(timerInterval);
                  finalScore.textContent = "your score: " + score;
                  endScreen.style.display = "block";
                }
              }, 1000);
            }

            function draw() {
              ctx.clearRect(0, 0, canvas.width, canvas.height);
              ctx.fillStyle = block.color;
              ctx.fillRect(block.x, block.y, block.width, block.height);
              block.x += block.dx;
              block.y += block.dy;
              if (block.x + block.width > canvas.width || block.x < 0) {
                block.dx *= -1;
              }
              if (block.y + block.height > canvas.height || block.y < 0) {
                block.dy *= -1;
              }
              requestAnimationFrame(draw);
            }
            canvas.addEventListener("click", function (e) {
              const rect = canvas.getBoundingClientRect();
              const mouseX = e.clientX - rect.left;
              const mouseY = e.clientY - rect.top;
              if (
                mouseX >= block.x &&
                mouseX <= block.x + block.width &&
                mouseY >= block.y &&
                mouseY <= block.y + block.height
              ) {
                score++;
                scoreDisplay.textContent = "Score: " + score;
                const colorChoices = [
                  "#FF0000",
                  "#CD5C5C",
                  "#FF4500",	
                  "#DC143C",
                  "#B22222",
                  
                ];
                block.color =
                  colorChoices[Math.floor(Math.random() * colorChoices.length)];

      if (score >= 30) {
      clearInterval(timerInterval)
        canvas.style.display = "none";
        document.getElementById("winScreen").style.display = "block";
        
        winText.textContent = `level ${currentLevel} complete!`;
        winSub.innerHTML = 'you got all 30 points';
      }
              }
            });
    </script>
  </body>
</html>
